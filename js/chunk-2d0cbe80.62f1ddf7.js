(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cbe80"],{"4c50":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"dashboard",fluid:"",tag:"section"}},[a("v-text-field",{staticClass:"mt-4",attrs:{label:"اكتب للبحث",outlined:"","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers,items:e.desserts,"sort-by":"phone",loading:e.loading},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("قائمة المستخدمين")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[e._v("اضافة مستخدم")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary lighten-1 mb-5"}},[a("v-toolbar-title",[a("h3",[e._v(e._s(e.formTitle))])]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!e.dialog}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"اسم المستخدم",outlined:"",rules:[e.rules.required]},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),-1===e.editedIndex?a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"كلمة المرور",outlined:"",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password","append-icon":e.show1?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1):e._e(),a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],staticStyle:{direction:"ltr"},attrs:{onkeypress:"return (event.charCode >= 48 && event.charCode <= 57)",label:"رقم الهاتف",outlined:"",rules:[e.rules.required,e.rules.minPhon],placeholder:"07XX XXX XXXX"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[a("v-select",{attrs:{items:e.perAll,label:"اختر الصلاحية",outlined:"","item-text":"name","item-value":"id",rules:[e.rules.required]},model:{value:e.editedItem.perID,callback:function(t){e.$set(e.editedItem,"perID",t)},expression:"editedItem.perID"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.close}},[e._v("الغاء")]),a("v-btn",{attrs:{loading:e.loadSave,color:"blue darken-1",text:""},on:{click:e.save}},[e._v("حفظ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.verified",fn:function(t){var i=t.item;return[i?a("v-chip",{attrs:{color:"green",dark:""}},[e._v("مفعل")]):e._e(),i?e._e():a("v-chip",[e._v("غير مفعل")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("اعادة تحميل")])]},proxy:!0}])})],1)},s=[],o=a("bc3a"),r=a.n(o),n=a("3d20"),d=a.n(n),l=a("3a60"),c={directives:{mask:l["mask"]},data:()=>({mask:"07XX XXX XXXX",show1:!1,rules:{required:e=>!!e||"مطلوب",min:e=>e.length>=6||"كلمة المرور يجب ان تتكون من 6 عناصر او اكثر",minPhon:e=>13==e.length||"رقم الهاتف يجب ان يتكون من 11 رقم"},search:"",loading:!1,loadSave:!1,dialog:!1,headers:[{text:"اسم المستخدم",align:"start",value:"name"},{text:"رقم المستخدم",value:"phoneNumber"},{text:" الصلاحية",value:"role"},{text:"الحالة",value:"verified"}],desserts:[],perAll:[{id:"ADMIN",name:"ادارة"},{id:"SUPER_ADMIN",name:"ادارة عامة"},{id:"VENDOR",name:"صاحب مذخر"},{id:"CUSTOMER",name:"صاحب صيدلية"}],editedIndex:-1,editedItem:{username:"",password:"",phone:"",id:"",perID:""},defaultItem:{username:"",password:"",phone:"",perID:""}}),computed:{formTitle(){return-1===this.editedIndex?"اضافة مستخدم":"تعديل المستخدم"}},watch:{dialog(e){e||this.close()}},created(){this.initialize()},methods:{showUsers(){this.loading=!0,r.a.get("users",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$store.state.idToken}}).then(e=>{this.loading=!1,this.desserts=e.data}).catch(()=>{this.loading=!1})},initialize(){this.showUsers()},editItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.editedItem.phone=this.editedItem.phone,this.dialog=!0},deleteItem(e){d.a.fire({title:"هل انت متاكد من العملية  ؟ ",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"نعم",cancelButtonText:"لا"}).then(t=>{t.value&&r.a.delete("users?Id="+e.id,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$store.state.idToken}}).then(()=>{d.a.fire("تم ","تمت العملية  بنجاح","success"),this.showUsers()}).catch(()=>{d.a.fire("لم يتم ","لم تمت العملية  بنجاح","error")})})},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.loadSave=!0,this.editedIndex>-1){const e={name:this.editedItem.username,phoneNumber:this.editedItem.phone.replace(/ /g,""),role:this.editedItem.perID};r.a.put("account/edit?id="+this.editedItem.id,e,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$store.state.idToken}}).then(()=>{this.loadSave=!1,this.showUsers(),this.close(),d.a.fire({title:"تم تعديل المستخدم",text:"",icon:"success",confirmButtonText:"اغلاق"})}).catch(()=>{this.loadSave=!1,d.a.fire({title:"تاكد من ملى المعلومات",text:"",icon:"error",confirmButtonText:"اغلاق"})})}else if(this.editedItem.username&&this.editedItem.password&&this.editedItem.phone&&this.editedItem.perID){const e={name:this.editedItem.username,password:this.editedItem.password,phoneNumber:this.editedItem.phone.replace(/ /g,""),role:this.editedItem.perID};r.a.post("users",e,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.$store.state.idToken}}).then(()=>{this.loadSave=!1,this.showUsers(),this.close(),d.a.fire({title:"تم اضافة المستخدم",text:"",icon:"success",confirmButtonText:"اغلاق"})}).catch(e=>{this.loadSave=!1,400.2==e.response.data.code?d.a.fire({title:"اسم المستخدم موجود",text:"",icon:"error",confirmButtonText:"اغلاق"}):d.a.fire({title:"تاكد من ملى المعلومات",text:"",icon:"error",confirmButtonText:"اغلاق"})})}else this.loadSave=!1,d.a.fire({title:"تاكد من ملى المعلومات",text:"",icon:"error",confirmButtonText:"اغلاق"})}}},h=c,m=a("2877"),p=a("6544"),u=a.n(p),v=a("8336"),f=a("b0af"),x=a("99d9"),I=a("cc20"),b=a("62ad"),k=a("a523"),g=a("8fea"),w=a("169a"),T=a("ce7e"),y=a("132d"),C=a("0fd9"),_=a("b974"),V=a("2fa4"),X=a("8654"),B=a("71d9"),S=a("2a7f"),D=Object(m["a"])(h,i,s,!1,null,null,null);t["default"]=D.exports;u()(D,{VBtn:v["a"],VCard:f["a"],VCardActions:x["a"],VCardText:x["b"],VChip:I["a"],VCol:b["a"],VContainer:k["a"],VDataTable:g["a"],VDialog:w["a"],VDivider:T["a"],VIcon:y["a"],VRow:C["a"],VSelect:_["a"],VSpacer:V["a"],VTextField:X["a"],VToolbar:B["a"],VToolbarTitle:S["a"]})}}]);
//# sourceMappingURL=chunk-2d0cbe80.62f1ddf7.js.map